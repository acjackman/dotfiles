- defaults:
    link:
      create: true
      relink: true

# Remvoe dead symbolic links to the dotfiles repo
- clean:
    ~/:
      force: true
    ~/.config:
    "~/Library/Application Support":
      if: "[ `uname` = Darwin ]"

- create:
    ~/.ssh:
      mode: 0700
    ~/dev:
    ~/.config/:
    ~/.local/share/:
    ~/.local/bin/:

- link:
    # Terminal
    ~/.config/alacritty: src/alacritty

    # Git
    ~/.gitconfig: src/gitconfig
    ~/.gitignore: src/gitignore
    ~/.gitconfig-fulcrum: src/gitconfig-fulcrum
    ~/.gitconfig-moov: src/gitconfig-moov

    # ZSH config
    ~/.zshenv: src/zsh/zshenv.zsh
    ~/.p10k.zsh: src/zsh/p10k.zsh

    ~/.config/zsh/.zshrc: src/zsh/zshrc.zsh
    ~/.config/zsh/zsh_plugins.zsh: src/zsh/zsh_plugins.zsh
    ~/.config/zsh/aliases.zsh: src/zsh/aliases.zsh
    ~/.config/zsh/functions: src/zsh/functions
    ~/.config/zsh/functions_local:
      if: "[ -d ~/.dotfiles-local/zsh/functions ]"
      path: ~/.dotfiles-local/zsh/functions
      force: true
    ~/.config/zsh/zshrc_local.zsh:
      if: "[ -f ~/.dotfiles-local/zsh/zshrc_local.zsh ]"
      path: ~/.dotfiles-local/zsh/zsh/zshrc_local.zsh
      force: true
    ~/.config/zsh/aliases_local.zsh:
      if: "[ -f ~/.dotfiles-local/zsh/aliases_local.zsh ]"
      path: ~/.dotfiles-local/zsh/zsh/aliases_local.zsh
      force: true

    # Scripts
    ~/.local/share/jackman/bin: src/bin

    # shell apps config
    ~/.ipython: src/ipython
    ~/.myclirc: src/myclirc

    # Emacs
    ~/.config/doom:
      path: src/doom/
      force: true

    ~/.config/tmux: src/tmux
    ~/.config/nvim: src/nvim
    ~/.config/k9s: src/k9s
    ~/.config/asdf: src/asdf
    ~/.config/lazygit: src/lazygit
    ~/.config/topgrade.toml: src/topgrade/config.toml
    ~/.editorconfig: src/editorconfig
    ~/.config/gh/config.yml:
      path: src/gh/config.yml # linking only config allows hosts to be unique
      force: true
    ~/.config/brewfile/Brewfile:
      if: "[ `uname` = Darwin ]"
      path: src/brewfile/Brewfile
    ~/.config/brewfile/Brewfile-local:
      if: "[ -f ~/.dotfiles/local/Brewfile ]"
      path: ~/.dotfiles/local/Brewfile

    # macOS & apps
    "~/Library/Application Support/espanso":
      if: "[ `uname` = Darwin ]"
      path: src/espanso
      force: true
    ~/.config/yabai:
      if: "[ `uname` = Darwin ]"
      path: src/yabai
      force: true
    ~/.hammerspoon:
      if: "[ `uname` = Darwin ]"
      path: src/hammerspoon
    ~/.config/karabiner:
      if: "[ `uname` = Darwin ]"
      path: src/karabiner
    ~/Library/Application Support/qmk/qmk.ini:
      if: "[ `uname` = Darwin ]"
      path: src/qmk.ini
    ~/Library/Application Support/Code/User/settings.json:
      if: "[ `uname` = Darwin ]"
      path: src/vscode/settings.json
    ~/Library/Application Support/Code/User/keybindings.json:
      if: "[ `uname` = Darwin ]"
      path: src/vscode/keybindings.json
    ~/Library/Application Support/Code/User/snippets:
      if: "[ `uname` = Darwin ]"
      path: src/vscode/snippets
